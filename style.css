/* base / layout */
*,*::before,*::after{box-sizing:border-box}
:root{
  --max-width:1360px;
  --gap:16px;
  --row-padding:8px;
  --accent:#007bff;
  --muted:#666;
}
body{font-family:Inter, "Segoe UI", Arial, Helvetica, sans-serif; background:#fafafa; margin:12px; color:#222; display:flex; justify-content:center}
.container{width:100%; max-width:var(--max-width); padding:6px 18px 40px; background:transparent}
h1{font-size:22px;margin:8px 0 6px}
.board{display:grid;grid-template-columns:1fr 1fr; gap:var(--gap); align-items:start}
@media (max-width:980px){ .board{grid-template-columns:1fr} }
.col h2{font-size:14px;margin:6px 0 10px;color:var(--muted)}

/* Row layout: time | stt | input & controls
   Use flexible input column and constrained right controls */
.row{
  display:grid;
  grid-template-columns:56px 40px 2.2fr minmax(160px,360px);
  gap:8px;
  align-items:center;
  padding:var(--row-padding);
  border:1px solid #e6e6e6;
  border-radius:8px;
  background:#fff;
}
@media (max-width:1200px){ .row{grid-template-columns:56px 40px 1.8fr minmax(120px,320px)} }
@media (max-width:980px){ .row{grid-template-columns:56px 40px 1fr 1fr} }

.timer{width:46px;text-align:center;color:#666;font-size:13px}
.timer.ready{color:#28a745;font-weight:700}
.row-number{width:40px;height:40px;border-radius:50%;background:#e9f6ff;color:var(--accent);display:flex;align-items:center;justify-content:center;font-weight:700;font-size:14px;cursor:pointer;user-select:none}

/* TEXT INPUT: allow shrink, ellipsis */
.text-input {
  box-sizing: border-box;
  min-width: 0;
  width: 100%;
  padding: 8px 10px;
  border: 1px solid #e0e0e0;
  border-radius: 6px;
  font-weight: 400;
  font-size: 14px;
  line-height: 1.4;
  color: #111;
  background: #fff;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.text-input::placeholder { color:#999; font-size:14px; font-weight:400; opacity:1; }
.text-input::selection { background:#b3d4ff; color:inherit; }

/* Right controls wrapper */
.row-right {
  display:flex;
  align-items:center;
  justify-content:flex-end;
  gap:8px;
  min-width:160px;
  max-width:360px;
  box-sizing:border-box;
  flex-shrink:0;
}

/* controls/buttons */
.controls{display:flex;gap:8px;align-items:center;flex-shrink:0}
.button{padding:7px 10px;border-radius:6px;border:none;color:#fff;cursor:pointer;font-size:13px}
.paste-btn{background:#28a745}
.send-btn{background:#17a2b8}
.copy-btn{background:#007bff}
.delete-btn{background:#dc3545}

/* copy count badge */
.copy-count{
  display:inline-block;
  min-width:64px;
  max-width:100px;
  padding:6px 8px;
  border-radius:6px;
  text-align:center;
  font-weight:700;
  background:transparent;
  color:#333;
  box-sizing:border-box;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.copy-warning { background: #ffeb3b !important; color: #000 !important; }

/* spinner */
.spinner-col { display:flex; flex-direction:column; align-items:center; gap:2px; min-width:30px; box-sizing:border-box; flex-shrink:0; }
.spinner-col button{ width:28px;height:18px;padding:0;border-radius:4px;border:1px solid #ddd;background:#fff;cursor:pointer;font-size:10px; }

.agent-select{width:110px;padding:6px;border-radius:6px;border:1px solid #ddd;background:#fff;font-size:13px;flex-shrink:0}
.note-input{width:140px;padding:8px;border:1px solid #e0e0e0;border-radius:6px;font-size:13px;resize:none;height:36px;flex-shrink:0}

.small{font-size:12px;color:var(--muted)}
.add-row-btn{background:#28a745;color:#fff;padding:8px 14px;border-radius:6px;border:none;cursor:pointer}

#links-modal{display:none;position:fixed;left:50%;top:50%;transform:translate(-50%,-50%);background:#fff;padding:14px;border:1px solid #ddd;border-radius:8px;z-index:9999;max-width:900px;width:94%;max-height:72vh;overflow:auto}
.toast{position:fixed;right:18px;bottom:18px;background:#28a745;color:#fff;padding:10px 14px;border-radius:8px;box-shadow:0 6px 18px rgba(0,0,0,0.18);z-index:2147483647;opacity:1;transition:opacity .3s,transform .25s}
.toast.error{background:#dc3545}

/* responsive tweaks */
@media (max-width:1200px) {
  .row { grid-template-columns:56px 40px 1.8fr minmax(120px,320px); }
  .row-right { min-width:120px; max-width:320px; }
}
@media (max-width:980px) {
  .note-input{ width:110px; min-width:90px; }
  .row { grid-template-columns:56px 40px 1fr 1fr; }
}
/* Fix: reserve right space for controls and keep controls above input */
.row {
  /* ưu tiên input lớn hơn, controls có vùng tối đa */
  grid-template-columns: 56px 40px 2.2fr minmax(160px,360px) !important;
}

/* Reserve space visually inside the input so text won't be hidden by the right controls */
.row .text-input {
  padding-right: 260px !important; /* ← quan trọng: đặt đủ chỗ cho nhóm nút + badge + agent + note */
  box-sizing: border-box !important;
}

/* Controls must sit on top and keep fixed-ish width */
.row > .row-right,
.row > :nth-child(4) {
  position: relative !important;
  z-index: 3 !important;
  min-width: 160px !important;
  max-width: 360px !important;
  display: flex !important;
  align-items: center !important;
  gap: 8px !important;
  flex-shrink: 0 !important;
}

/* Make sure buttons don't expand too much and stay compact */
.row .controls .button { white-space: nowrap; padding:6px 8px; font-size:13px; }

/* If the reserved padding is too big/small, adjust this number (260px) up/down */
@media (max-width:1200px) {
  .row .text-input { padding-right: 200px !important; }
  .row { grid-template-columns:56px 40px 1.8fr minmax(120px,320px) !important; }
}
@media (max-width:980px) {
  .row .text-input { padding-right: 120px !important; }
  .row { grid-template-columns:56px 40px 1fr 1fr !important; }
}
